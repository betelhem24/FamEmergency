// I define the standard Prisma generator to create the client for TypeScript
generator client {
  provider = "prisma-client-js"
}

// I set up the connection to the PostgreSQL database using the URL from the .env file
datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// I define the User model to store account information in Neon
model User {
  // I changed this to String to match the MongoDB ObjectId format
  id        String   @id
  email     String   @unique
  name      String?
  password  String
  
  // I identify if the user is a PATIENT or a DOCTOR
  role      String   @default("PATIENT")
  
  // I track exactly when the user registered
  createdAt DateTime @default(now()) 
  
  // I create a relation to link many emergency contacts to one user
  contacts  EmergencyContact[] 
}

// I define the EmergencyContact model to store specific contact details
model EmergencyContact {
  id        Int      @id @default(autoincrement())
  name      String
  phone     String
  relation  String
  
  // I store the String ID of the user who owns this contact
  userId    String
  
  // I establish the link back to the User model
  user      User     @relation(fields: [userId], references: [id])
}